{
	"title": "PDC Data Download Client",
	"note": "Note: For details about available file types, information on how to download from the PDC web portal user interface or through APIs, go to the <a href='/pdc/faq/Data_Download' target='_blank'>Data Download</a> section of the PDC Frequently Asked Questions.",
	"description": "The PDC data download client supports the download of all files associated with PDC studies. The command line (CL) version is recommended for those that have some experience with command line tools in cases where the user needs to download a large volume data in an organized manner. For users that prefer a graphical interface, the PDC Data Download Client User Interface (UI) is available.",
	"installation": {
		"system_requirements": "<ul><li>OS: Linux (Ubuntu 14.x or later, CentOS 7), OS X (10.9 Mavericks or < 12.0 ), or Windows (7 or later)</li><li>Please delete any previous instances of the download client before downloading a newer version.</li></ul>",
		"binary_distributions": [
			{
				"platform": "Linux",
				"command_line_ui_title": "pdc-client_v1.0.7_Ubuntu_x64.zip",
				"command_line_ui_url": "https://pdc-download-clients.s3.amazonaws.com/pdc-client_v1.0.7_Ubuntu_x64.zip"
			},
			{
				"platform": "OS X",
				"command_line_ui_title": "pdc-client_v1.0.7_OSX_x64.zip",
				"command_line_ui_url": "https://pdc-download-clients.s3.amazonaws.com/pdc-client_v1.0.7_OSX_x64.zip"
			},
			{
				"platform": "Windows",
				"command_line_ui_title": "pdc-client_v1.0.7_Windows_x64.zip",
				"command_line_ui_url": "https://pdc-download-clients.s3.amazonaws.com/pdc-client_v1.0.7_Windows_x64.zip"
			}		
		],
		"information": [
			{
				"title": "<h4>Release Notes</h4>",
				"content": "<ul><li>Please click <a href='https://pdc-release-notes.s3.amazonaws.com/PDC_DownloadClient_Release_Notes.html' target='_blank'>here</a> for the release notes of the Download Client.</li></ul>"	
			},			
			{
				"title": "<h4>Known Issues</h4>",
				"content": "<ul> <li>There is a limit of 10 download attempts per individual file. This limit includes the retries that are automatically attempted by the download client. The current error message does not reflect this (CL). </li></ul>"	
			}
		]
	},
	"content": {
		"links": [{
				"text": "Obtaining a File manifest for Data download",
				"sectionID": "Obtaining_a_File_manifest_for_data_download",
				"details": "In order to download files using either the UI or command line version of the PDC data download client, you will need to have a file manifest downloaded from the PDC portal. To generate a file manifest, go to the ‘Explore’ page, and apply filters to isolate the study or group of studies you want to download files from. Navigate to the files tab and select the files you wish to download. You can use the dropdown in the upper left corner to select all files available for the studies you have filtered by choosing the ‘select all pages’ option. With the desired files selected, choose either the CSV or TSV option of the ‘Export File Manifest’ feature. Both formats are supported by the PDC data download client. Place the downloaded manifest in the same directory as the download client executable, or in another known location.<div style='width:60%; margin-left: 20%'><br><img mat-card-image class='imgStyles' height='500' src='assets/data-download-1.png' alt='Export File Manifest from PDC Data browser'/></div><br><div><b>Note:</b> The PDC data download client will reject manifests older than one week (168 hours), as the download URLs will no longer be valid. </div><br>"
			},
			{
				"text": "Data Download Client User Interface (UI)",
				"sectionID": "Data_Download_Client_User_Interface_UI",
				"details": "<!-- @@PDC-5635 data download client user interface documentation --><h4>Installation Prerequisites</h4> <div> <p> First, begin by clicking on the link in the “PDC Data Download Client Command Line & User Interface” column of the “Binary Distributions” table above that corresponds to your operating system type. The zip folder contains both the CL & UI versions. To use the UI version, unzip the folder that contains 'UI' in the file name and follow the installation instructions below. Note the system requirements displayed above the table. If your particular operating system does not meet the version requirements, the download client UI may not run. To view operating system version on Windows, go to the start menu, search for and select ‘System Information’. To view the operating system version on Mac, navigate to the apple menu and select ‘About This Mac’. Methods for viewing the Linux version will depend on the distribution but opening the command prompt and using the ‘lsb-release’ command will display version information on common Debian-based Linux distributions such as Ubuntu. </p> <p> Clicking on a link will begin the download of the Zip (.zip extension) file containing the download client. Depending on your operating system version, it may be necessary to install an archive manager to extract the archive’s files. Most current operating system versions will have tools for managing Zip files built in. </p> </div> <br><h4>OS X Installation Instructions</h4> <div> <p> On OS X, the Zip file will contain a DMG file which can be run to install the PDC Data download client UI. Navigate to the downloaded Zip file, which should appear in your downloads folder by default. Extracting the file (double clicking on the Zip file or right-click -> “open with” -> “Zip file utility”) will produce the DMG file. Double click the DMG file to install the PDC download client. You will be prompted to move the client to your ‘Applications’ folder during the installation process. If you run into an error such as 'macOS cannot verify the developer of “pdcdownloadclient”. Are you sure you want to open it?', please navigate to 'Security preferences' -> 'Security and Privacy' settings of your MAC machine and choose an option to run the app. Now you can run the PDC download client UI as you would any other application. </p> </div> <br><h4>Windows installation Instructions</h4> <div> <p> On Windows, the Zip file will contain all the necessary components to run the UI client. Navigate to the Zip file, which should appear in your downloads folder by default. Note that if you double click on the file, it will open the Zip file; however, you must extract all files to run the client. You may extract the files to any folder you would like. To do this right-click the Zip file and choose “Extract All”, or open the Zip file, select all the files, and move them to the destination folder by dragging them or copying and pasting them. Open the extracted folder and look for the ‘pdcDownloadClient.exe’ executable file; double clicking this file will open the PDC Data Download Client UI. If you run into an error such as 'Microsoft Defender SmartScreen prevented an unrecognized app from starting. Running this app might put your PC at risk', please click on 'More info' and choose 'Run anyway'. You may create a shortcut to the executable file for easy access in the future.</p> </div> <br><h4>Ubuntu Installation Instructions</h4> <div> <p> On Linux, the Zip file will contain an AppImage file which can be run to install the PDC Data download client UI. Navigate to the downloaded Zip file, which should appear in your downloads folder by default. Extracting the file (double clicking on the Zip file or right-click -> “open with” -> “Zip file utility”) will produce the executable file. Double click the AppImage file to install the PDC download client. In some cases where you’re unable to run the app, you might have to install the “libfuse2” package which is an interface used by the Linux kernel for userspace programs to export a filesystem to the kernel. For installing it, please open the command prompt and run “sudo apt-get install -y libfuse2”. Now you can run the PDC download client UI as you would any other application. <br>Some Ubuntu users might run into the error ”No application installed for AppImage application bundle files” while trying to run the client. In order to resolve this error, right-click on the extracted AppImage file -> Properties -> Permissions -> select ”Allow Executing File as a Program”. Then try running it again by double-clicking or right-click -> Open. This will resolve the issue and you'll be able to run the application. </p> </div> <br><h4>Basic Usage</h4> <div> Executing the PDC data download client UI by running the standalone executable will open the UI. Here, you may start the download process by selecting a file manifest. Clicking the ‘Select Manifest File’ button will allow you to browse for the manifest. <div style='width:60%; margin-left: 20%'><br><img mat-card-image class='img2Styles' style='align-content: center; border: 1px solid #555;' height='500' src='assets/UI_Screen_Shot_1.png' alt='Select Manifest File'/><br></div> Once a manifest has been selected, the contents will appear in the UI in the ‘Manifest’ tab. These contents will be available until either a new manifest is uploaded, the ‘Clear Cache’ option is selected, or the interface is closed. <div style='width:60%; margin-left: 20%'><br><img mat-card-image class='imgStyles' height='500' src='assets/UI_Screen_Shot_2.png' alt='Select Files to Download'/><br></div> <p> To select the files you wish to download, click the checkbox in the leftmost column of the table next to the desired file. Clicking the checkbox in the top left of the table will select all files present in the manifest. Once you have selected the files you wish to download, click the ‘Download’ button on the bottom right to begin downloading your files. Files that have been downloaded successfully will appear in the ‘Completed’ tab. In the event you either cancel the download by clicking the ‘Stop’ button or if the download fails, the files left to download will appear in the ‘Failed’ or ‘Stopped’ tab. By navigating to those tabs, you may select the remaining files and resume the download. 'Skipped' tab lists previously downloaded files that already exist in the download path.</p> <div> <b>Note:</b> When exiting the client, any failed or stopped downloads will remain visible the next time the PDC Download Client UI is run. Uploading a new manifest, or hitting the ‘Clear Cache’ button will reset these tabs. </div> <div> <br><h4>Configuring the download client </h4> <p> Clicking on the ‘Settings’ tab will allow you to configure various options for downloading your data. </p> <div style='width:60%; margin-left: 20%'><br><img mat-card-image class='img2Styles' height='500' src='assets/UI_Screen_Shot_3.png' alt='Configuring Download Client'/><br></div> <p> The ‘Destination Folder’ field along with the 'Browse' button allows you to enter the file path to which your files will be downloaded. If the file path or folder that is entered cannot be found a warning will appear when hitting ‘Save Settings’ indicating that the file path is not valid. </p> <p> The ‘Use PDC default directory structure’ option specifies whether to use the default directory structure: <br> PDC Study ID -> Study Version Number -> Data Category -> Run Metadata ID (if applicable) -> File Format or an alternative structure, where each file is given its own folder in the parent directory. </p> <p>The ‘Calculate Inbound Segment and check Md5sum on Restart’ and ‘Check Md5sum after Download’ options are optional features that ensures file integrity is maintained. </p> <p>Other parameters you may configure are present in the ‘Advanced Settings’. These settings share their behavior with the optional arguments for the PDC Data Download Command Line tool.</p> </div> </div><br>"
			},
			{
				"text": "Data Download Client Command Line",
				"sectionID": "Data_Download_Client_Command_Line",
				"details": "<h4>Basic Usage</h4> <div>Once the file manifest has been exported you are ready to download files using the command line tool. Executing the PDC data download client without any parameters will show the available base commands and Note: Trying to use the executable directly by double-clicking will only cause a window to appear briefly. The PDC Data Download Client can only be run using the command-line. Select 'Command Prompt' on Microsoft Windows or 'Terminal' in OS X or Ubuntu to open a new command-line instance. <br> Note: For a Windows machine, please install a tool equivalent of Git Bash to run Unix commands.<br>The path to the file manifest is included in the download command with the inclusion of the <strong>-m</strong> or <strong>--manifest</strong> followed by the location and name of the manifest <br><br>Navigate to the directory where the binary and manifest files are present. (Eg Downloads directory: /home/Users/Downloads)<br><code class='data-download'>cd /home/Users/Downloads</code><br><br>Run the following command<br><code class='data-download'>./pdc-client.exe download -m PDC_file_manifest_05032022_145231.tsv </code> </div> <br><h4>Directory Structure of Downloaded Files</h4> <div> The default behavior of the PDC data download client is to download files into a directory tree with the following format to the directory in which the client was run: <br>PDC Study ID -> Study Version Number -> Data Category -> Run Metadata ID (if applicable) -> File Format <br>Users may also choose an alternative format that downloads each file into its own separate directory by providing the <strong>--not-retain-pdc-download-path</strong> option. <br><br><code class='data-download'>./pdc-client.exe download -m PDC_file_manifest_05032022_145231.tsv --not-retain-pdc-download-path</code> <br>When using this option it is possible to specify an alternative directory in which to download the files. Provide the <strong>--dir</strong> followed by the desired file path. This will place all downloaded files in the specified location without creating individual folders for each file. The <strong>--dir</strong> option is only available when used in combination with the <strong>--not-retain-pdc-download-path</strong> option. If <strong>--not-retain-pdc-download-path</strong> is not specified, the <strong>--dir</strong> option is ignored, and files will be downloaded in the current directory in the standard PDC download path. <br><br><code class='data-download'>./pdc-client.exe download -m PDC_file_manifest_05032022_145231.tsv --not-retain-pdc-download-path --dir /Example/Directory/Path</code> <br>Note: The specified directory must be created prior to running the command; the client will not create the directory itself and an error will be thrown if the directory cannot be found. </div> <br><h4>Resuming a Failed Download</h4> <div> In the event a file fails to download, a file with the '.partial' extension will appear in the destination folder. To complete the download of these files, repeat the download command with the same destination path and a manifest containing the failed/missing files; the PDC Data Download Client will identify and download any missing and partial files. Files present in the manifest that were successfully downloaded will be automatically skipped. <br>Note: The PDC allows for a maximum of 10 retries for a given file within a 24-hour period. The number of retries to be automatically attempted can be specified with the <strong>--retry-amount</strong> option, or the automatic retries can be disabled with the <strong>--no-auto-retry</strong> option. The client will notify you when the limit has been reached for a particular file. </div> <br><h4>File Integrity Checks</h4> <div> Every file distributed by the PDC has had its MD5 sum calculated; this value can be found in the file manifests. By default, the PDC Data Download client will calculate the MD5 of any downloaded files and verify it against the value in the manifest. This ensures the downloaded files and the version stored by the PDC are identical, and no file corruption has occurred. Running the download command with the <strong>--no-file-md5sum</strong> option will skip this validation step. <br><br><code class='data-download'>./pdc-client.exe download --no-file-md5sum -m PDC_file_manifest_05032022_145231.tsv </code> </div> <br><h4>Configuration Parameters</h4> In the event a user must download files from several different manifests, a configuration file can be used to store the optional parameters for repeated use. To create a configuration file, open a new text file and write the desired parameters in the following format: <br><br><code class='data-download'>[download] <br> dir=/c/Users/Example/Downloads/PDC_Download_Dir/ <br> not_retain_pdc_download_path=True </code> <br>Save the text file with the '.dtt' extension and you may use the parameters set within by including the --config option followed by the file path and name of the DTT file. <br><br><code class='data-download'>./pdc-client.exe download -m PDC_file_manifest_05032022_145231.tsv --config my-config.dtt</code> <br>Users may review the options set in the config file by running the download command without a manifest, providing only the command and --config option followed by the file path and name of the DTT file. <br><code class='data-download'>./pdc-client.exe settings download --config my-dtt-config.dtt </code> <br>There are many options that can be used to further configure the download process to suit a user’s needs. running the client with a command and the ‘-h’ option will show all optional arguments for that command. These parameters can be set in the command line, or in a configuration file. <code class='data-download'>./pdc-client.exe download -h </code> <br>Other configuration parameters that can be set in the configuration file: <br><code class='data-download'> no_auto_retry = False <br>no_file_md5sum = False <br>save_interval = 1073741824 <br>http_chunk_size = 2048 <br>n_processes = 3 <br>retry_amount = 6 <br>no_segment_md5sum = False <br>manifest = [] <br>wait_time = 5.0 <br>no_verify = True <br>dir = /some/download/path </code> </div>"
			}
		]
	}

}